import{c as g,u as G,r as s,j as e,A as Q,m as K,X as Z}from"./index-ClCrxigg.js";import{S as ee}from"./send-C0Kvq_r2.js";/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],ne=g("bot",te);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],re=g("message-square",se);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],ie=g("mic-off",ae);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],ce=g("mic",oe);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],ue=g("minimize-2",le);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],fe=g("volume-2",de);/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],pe=g("volume-x",he),ge={},ve=()=>{const{language:l}=G(),[m,N]=s.useState(!1),[x,_]=s.useState(""),[z,T]=s.useState([{id:"1",sender:"bot",text:"Hej! üëã Jag heter Sofia och √§r NetvisionKs AI-agent. Hur kan jag hj√§lpa dig med v√•ra digitala l√∂sningar idag?",timestamp:new Date}]),[C,q]=s.useState(!1),[u,w]=s.useState(!1),[v,P]=s.useState(!1),[M,j]=s.useState(!1),[U,S]=s.useState(null),[E,J]=s.useState(null),d=s.useRef(null),$=s.useRef(null),a=s.useRef(null),A=s.useRef(null),y=s.useRef(""),h=s.useRef(!0),R=s.useRef(!1),b=s.useRef(!1);s.useEffect(()=>{R.current=m},[m]),s.useEffect(()=>{b.current=M},[M]),s.useEffect(()=>{y.current=x},[x]);const F=()=>{var t;(t=$.current)==null||t.scrollIntoView({behavior:"smooth"})};s.useEffect(()=>{F()},[z,C]);const k=s.useCallback(()=>{window.speechSynthesis.cancel(),d.current&&(d.current.pause(),d.current.currentTime=0),j(!1),S(null)},[]),p=s.useCallback(()=>{if(!(!h.current||b.current))try{a.current&&(a.current.start(),w(!0))}catch{}},[]);s.useEffect(()=>{const t=()=>{!u&&h.current&&p()};return window.addEventListener("click",t,{once:!0}),()=>window.removeEventListener("click",t)},[u,p]);const W=()=>{var t;u?(h.current=!1,(t=a.current)==null||t.stop(),w(!1)):(h.current=!0,p())},I=s.useCallback(()=>{const t=window.speechSynthesis.getVoices(),n=l==="sv"?"sv":l==="sq"?"sq":"en",i=t.filter(c=>c.lang.startsWith(n)),r=i.find(c=>c.name.includes("Natural")||c.name.includes("Neural"))||i.find(c=>c.name.includes("Google"))||i[0];r&&J(r)},[l]);s.useEffect(()=>(I(),window.speechSynthesis.onvoiceschanged=I,()=>{window.speechSynthesis.onvoiceschanged=null}),[I]);const D=s.useCallback(async(t,n)=>{var H,O,B;if(v)return;(H=a.current)==null||H.stop(),k();const i=ge,r=(i==null?void 0:i.VITE_ELEVENLABS_API_KEY)||((B=(O=window.process)==null?void 0:O.env)==null?void 0:B.REACT_APP_ELEVENLABS_API_KEY)||"",c=l==="sv"?"9BWtsm6S4pxI5S8p84qf":"21m00Tcm4TbcDqHe8dBC",o=()=>{j(!1),S(null),h.current&&setTimeout(p,200)};if(r)try{j(!0),S(n);const L=await fetch(`https://api.elevenlabs.io/v1/text-to-speech/${c}`,{method:"POST",headers:{"Content-Type":"application/json","xi-api-key":r},body:JSON.stringify({text:t,model_id:"eleven_multilingual_v2",voice_settings:{stability:.5,similarity_boost:.75}})});if(!L.ok)throw new Error;const Y=await L.blob();d.current||(d.current=new Audio),d.current.src=URL.createObjectURL(Y),d.current.onended=o,d.current.play();return}catch{console.error("ElevenLabs failed")}const f=new SpeechSynthesisUtterance(t);f.voice=E||null,E||(f.lang=l==="sv"?"sv-SE":l==="sq"?"sq-AL":"en-US"),f.onstart=()=>{j(!0),S(n)},f.onend=o,window.speechSynthesis.speak(f)},[v,k,l,E,p]),X=t=>{const n=t.toLowerCase();return n.includes("pris")||n.includes("kostnad")||n.includes("offert")?"V√•ra priser √§r skr√§ddarsydda efter varje projekts behov. F√∂r outsourcing erbjuder vi ofta l√∂sningar som √§r 30-50% mer kostnadseffektiva √§n lokala alternativ. Vill du ha en offert? [Kontakta oss via formul√§ret](/contact)!":n.includes("kontakt")||n.includes("mail")||n.includes("telefon")?`Du kan n√• oss via:
üìß info@netvisionks.com
üìû 08-123 45 67
üìç [Hitta oss p√• Sveav√§gen 1, Stockholm](/contact)`:n.includes("jobb")||n.includes("karri√§r")||n.includes("rekrytering")?"Vi s√∂ker alltid efter nya talanger! Just nu letar vi efter Senior React Developers och .NET experter. Kolla in v√•r [Karri√§r-sida](/contact) f√∂r mer info.":n.includes("tj√§nster")||n.includes("erbjuder")?`Vi specialiserar oss p√•:
‚úÖ Staff Augmentation
‚úÖ Skr√§ddarsydd Utveckling
‚úÖ Molnl√∂sningar
‚úÖ Apputveckling`:n.includes("hej")||n.includes("tja")?"Hej d√§r! Kul att du tittar f√∂rbi. Vad kan jag hj√§lpa till med?":"Jag √§r fortfarande under uppl√§rning! üòä Jag kan svara p√• fr√•gor om v√•ra tj√§nster, priser, karri√§r eller kontaktuppgifter."},V=s.useCallback(t=>{const n=t.trim();if(n.length<2)return;k();const i={id:Date.now().toString(),sender:"user",text:n,timestamp:new Date};T(r=>[...r,i]),_(""),y.current="",q(!0),setTimeout(()=>{const r=X(n),c=(Date.now()+1).toString();T(o=>[...o,{id:c,sender:"bot",text:r,timestamp:new Date}]),q(!1),D(r,c)},1500)},[k,D]);return s.useEffect(()=>{const t=window.SpeechRecognition||window.webkitSpeechRecognition;if(t)return a.current||(a.current=new t,a.current.continuous=!0,a.current.interimResults=!0),a.current.onresult=n=>{if(b.current)return;let i="",r="";for(let o=n.resultIndex;o<n.results.length;++o)n.results[o].isFinal?i+=n.results[o][0].transcript:r+=n.results[o][0].transcript;if(!i&&!r)return;if((i+r).toLowerCase().includes("hej sofia")&&!R.current){N(!0);return}R.current&&i&&(_(o=>{const f=o+(o?" ":"")+i;return y.current=f,f}),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{y.current.trim().length>=2&&!b.current&&V(y.current)},2e3))},a.current.onend=()=>{w(!1),h.current&&!b.current&&setTimeout(p,100)},a.current.onerror=n=>{n.error==="not-allowed"&&(h.current=!1,w(!1))},()=>{a.current&&(a.current.onresult=null,a.current.onend=null,a.current.onerror=null)}},[V,p]),s.useEffect(()=>{a.current&&(a.current.lang=l==="sv"?"sv-SE":l==="sq"?"sq-AL":"en-US")},[l]),e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:m&&e.jsxs(K.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed bottom-24 right-4 md:right-8 w-[90vw] md:w-[380px] h-[500px] bg-white/80 backdrop-blur-xl border border-white/50 rounded-2xl shadow-2xl z-50 overflow-hidden flex flex-col font-sans",children:[e.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 p-4 flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:e.jsx(ne,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm",children:"Sofia ‚Äî AI Agent"}),e.jsxs("span",{className:"text-xs text-white/80 flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Online"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{M&&k(),P(!v)},className:"p-1.5 hover:bg-white/10 rounded-lg","aria-label":v?"Sl√• p√• ljud":"St√§ng av ljud",children:v?e.jsx(pe,{size:18}):e.jsx(fe,{size:18})}),e.jsx("button",{onClick:()=>N(!1),className:"p-1.5 hover:bg-white/10 rounded-lg","aria-label":"Minimera chatt",children:e.jsx(ue,{size:18})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50/50",children:[z.map(t=>e.jsx("div",{className:`flex ${t.sender==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`p-3 rounded-2xl text-sm max-w-[85%] relative ${t.sender==="user"?"bg-orange-600 text-white rounded-tr-none":"bg-white border text-gray-800 rounded-tl-none"}`,children:[t.sender==="bot"?e.jsx("div",{children:t.text.split(/(\[.*?\]\(.*?\))/g).map((n,i)=>{const r=n.match(/\[(.*?)\]\((.*?)\)/);return r?e.jsx("a",{href:r[2],className:"text-orange-600 font-bold hover:underline",children:r[1]},i):n})}):t.text,U===t.id&&e.jsxs("span",{className:"absolute -left-6 top-1/2 -translate-y-1/2 flex gap-0.5",children:[e.jsx("span",{className:"w-1 h-3 bg-orange-500 rounded-full animate-pulse"}),e.jsx("span",{className:"w-1 h-5 bg-orange-500 rounded-full animate-pulse"})]})]})},t.id)),C&&e.jsx("div",{className:"p-3 bg-white border w-max rounded-2xl rounded-tl-none animate-pulse",children:"..."}),e.jsx("div",{ref:$})]}),e.jsx("div",{className:"p-4 bg-white border-t",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),V(x)},className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",value:x,onChange:t=>_(t.target.value),placeholder:u?"Lyssnar...":"Skriv h√§r...",className:`w-full bg-gray-100 rounded-xl px-4 py-3 pr-10 text-sm outline-none focus:ring-2 focus:ring-orange-500 ${u?"ring-2 ring-orange-400":""}`}),e.jsx("button",{type:"button",onClick:W,className:`absolute right-2 top-1/2 -translate-y-1/2 p-2 ${u?"text-red-500":"text-gray-400"}`,"aria-label":u?"Sluta lyssna":"Starta r√∂stinmatning",children:u?e.jsx(ie,{size:18}):e.jsx(ce,{size:18})})]}),e.jsx("button",{type:"submit",disabled:!x.trim(),className:"bg-orange-600 text-white p-3 rounded-xl","aria-label":"Skicka meddelande",children:e.jsx(ee,{size:20})})]})})]})}),e.jsx(K.button,{onClick:()=>N(!m),className:"fixed bottom-32 right-6 md:bottom-8 md:right-8 z-50 bg-gradient-to-r from-orange-600 to-red-600 text-white p-4 rounded-full shadow-lg","aria-label":m?"St√§ng AI-chatt":"√ñppna AI-chatt",children:m?e.jsx(Z,{size:28}):e.jsx(re,{size:28})})]})};export{ve as default};
